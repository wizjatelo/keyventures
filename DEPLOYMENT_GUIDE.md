# LineMart Deployment Guide

## ðŸš¨ CRITICAL: Repository Issue Detected

The deployment is failing because it's trying to clone from the wrong repository:
- **Current (Wrong)**: `https://github.com/wizjatelo/keyventures`
- **Should be**: Your actual LineMart repository

## ðŸ”§ Step-by-Step Deployment Fix

### Step 1: Repository Setup
1. **Create a new GitHub repository** for your LineMart project
2. **Push your local code** to the correct repository
3. **Update Render configuration** to use the correct repository

### Step 2: Render Configuration Options

#### Option A: Deploy as Static Site (Frontend Only)
Use this render.yaml in the `linemart-frontend` directory:

```yaml
services:
  - type: static
    name: linemart-frontend
    buildCommand: "npm install && npm run build"
    staticPublishPath: ./build
    pullRequestPreviewsEnabled: true
    envVars:
      - key: REACT_APP_API_URL
        value: https://linemart-backend.onrender.com
    region: oregon
    plan: free
```

#### Option B: Deploy Full Stack (Recommended)
Use the main render.yaml in the root directory:

```yaml
databases:
  - name: linemart-db
    databaseName: linemart
    user: linemart_user
    region: oregon

services:
  - type: web
    name: linemart-backend
    runtime: python3
    buildCommand: "cd backend && pip install --upgrade pip && pip install -r requirements.txt && python manage.py collectstatic --no-input && python manage.py migrate"
    startCommand: "cd backend && gunicorn config.wsgi:application"
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: linemart-db
          property: connectionString
      - key: SECRET_KEY
        generateValue: true
      - key: DEBUG
        value: false
    region: oregon
    plan: free

  - type: static
    name: linemart-frontend
    buildCommand: "cd linemart-frontend && npm install && npm run build"
    staticPublishPath: linemart-frontend/build
    pullRequestPreviewsEnabled: true
    envVars:
      - key: REACT_APP_API_URL
        value: https://linemart-backend.onrender.com
    region: oregon
    plan: free
```

### Step 3: Manual Deployment Commands

If automatic deployment fails, you can deploy manually:

#### For Frontend Only:
```bash
# Navigate to frontend directory
cd linemart-frontend

# Install dependencies
npm install

# Build the application
npm run build

# The build folder is ready for deployment
```

#### For Backend:
```bash
# Navigate to backend directory
cd backend

# Install Python dependencies
pip install -r requirements.txt

# Run migrations
python manage.py migrate

# Collect static files
python manage.py collectstatic --no-input

# Start the server
gunicorn config.wsgi:application
```

### Step 4: Environment Variables

Set these environment variables in Render:

#### Backend:
- `DATABASE_URL`: (Auto-generated by Render)
- `SECRET_KEY`: (Auto-generated by Render)
- `DEBUG`: `false`
- `ALLOWED_HOSTS`: `your-app-name.onrender.com`

#### Frontend:
- `REACT_APP_API_URL`: `https://your-backend-name.onrender.com`

### Step 5: Troubleshooting Common Issues

#### Issue: "react-scripts: not found"
**Solution**: Ensure npm install runs before npm run build
```bash
npm install && npm run build
```

#### Issue: "No lockfile found"
**Solution**: This is normal for first deployment, yarn/npm will create it

#### Issue: "Wrong repository"
**Solution**: 
1. Create correct GitHub repository
2. Push your code to it
3. Update Render to use the correct repository URL

### Step 6: Verification

After deployment, verify:
1. âœ… Frontend loads at your Render URL
2. âœ… Backend API responds at `/admin/`
3. âœ… Database connections work
4. âœ… Static files serve correctly

## ðŸŽ¯ Quick Fix for Current Issue

**Immediate Action Required:**
1. **Create a new GitHub repository** for LineMart
2. **Push your local code** to the new repository
3. **Update Render** to use the correct repository URL
4. **Redeploy** using the updated render.yaml configuration

The error you're seeing is because Render is trying to deploy a different project (`keyventures`) instead of your LineMart project.

## ðŸ“‹ Deployment Checklist

- [ ] Create correct GitHub repository
- [ ] Push LineMart code to repository
- [ ] Update Render repository settings
- [ ] Use correct render.yaml configuration
- [ ] Set environment variables
- [ ] Test deployment
- [ ] Verify all services are running

Your LineMart implementation is complete and ready for deployment - the issue is just with the repository configuration in Render.